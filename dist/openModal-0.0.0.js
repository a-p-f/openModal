!function(){"use strict";var e,t,o,n,a,i,s,r,d,l,c;function u(){if(!e)throw new Error("No modal window is currently open.");e.parentElement.removeChild(e),removeEventListener("scroll",p),removeEventListener("click",f,!0),document.body.removeEventListener("focus",w,!0),n&&n.focus(),e=null,a&&a(i),a=null}function m(){var e=document.createElement("iframe"),t=e.style;return t.position="fixed",t.top=0,t.left=0,t.width="100%",t.height="100%",t.border="none",t.margin=0,t.padding=0,t.zIndex=9007199254740991,e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),document.body.appendChild(e),e}function p(){document.documentElement.scrollTop=t,document.documentElement.scrollLeft=o}function f(e){e.stopPropagation(),e.preventDefault()}function w(){document.activeElement!=e&&e.focus()}function h(){return window.parent!=window}function y(){window.parent.postMessage({closeModal:!0},"*")}function E(e){try{return e in history.state}catch(e){return!1}}if(addEventListener("message",(function(t){e&&t.source==e.contentWindow&&(t.data.modalChildTitled&&e.setAttribute("aria-label",t.data.modalChildTitled),"setModalCloseValue"in t.data&&(console.debug("received set close value message"),_setOpenModalCloseValue(t.data.setModalCloseValue)),"closeModal"in t.data&&u())})),addEventListener("popstate",(function(){e&&u()})),window._setOpenModalCloseValue=function(t){i=t,e.contentWindow.postMessage("MODAL_CLOSE_VALUE_RECEIVED","*")},window.openModal=function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e)throw new Error("A modal window is already open. A window may only open one modal window at a time.");n=document.activeElement,o=document.documentElement.scrollLeft,t=document.documentElement.scrollTop,addEventListener("scroll",p),addEventListener("click",f,!0),document.body.addEventListener("focus",w,!0),a=s.onclose,e=m(),s.background&&(e.style.background=s.background),e.addEventListener("load",(function(t){s.onload&&s.onload(e.contentWindow)})),e.src=i},addEventListener("message",(function(e){e.source==window.parent&&"MODAL_CLOSE_VALUE_RECEIVED"==e.data&&(console.debug("parent acked value. unwinding..."),history.go(-1*parseInt(sessionStorage[s])),setTimeout(y,200))})),window.closeModal=function(e){if(!h())throw new Error("This is not a modal window");try{window.parent._setOpenModalCloseValue(e)}catch(t){window.parent.postMessage({setModalCloseValue:e},"*")}},h()){if(console.debug("initializing modal child"),window.name=window.name||"openModalWindow"+Date.now(),(s=window.name+"historyDepth")in sessionStorage)if(E(s))sessionStorage[s]=history.state[s];else if(function(){try{return"navigate"==performance.getEntriesByType("navigation")[0].type}catch(t){var e=performance.navigation;return e.type===e.TYPE_NAVIGATE}}()){var g=parseInt(sessionStorage[s])+1;sessionStorage[s]=g;var v=history.state||{};v[s]=g,history.replaceState(v,"",location.href)}else y();else history.pushState((c=1,(l=s)in(d={})?Object.defineProperty(d,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):d[l]=c,d),"",location.href),sessionStorage[s]=1;r=history.pushState.bind(history),history.pushState=function(e,t,o){if(!e||"{"!=JSON.stringify(e)[0])throw new Error('Pages inside a modal window may use history.pushState, but they must pass a "simple object" (NOT Array, String, Number, null, etc.) as the state object');var n=history.state[s]+1;sessionStorage[s]=n,e[s]=n,r(e,t,o)},addEventListener("popstate",(function(){console.debug("popped state in child ".concat(location.href)),E(s)?navigator.userAgent.indexOf("Trident/7.0")>-1&&history.state[s]==sessionStorage[s]?y():sessionStorage[s]=history.state[s]:y()})),function(){window.parent.postMessage({modalChildTitled:document.title},"*");var e=document.querySelector("[autofocus]");e?e.focus():(document.body.tabIndex=-1,document.body.focus())}()}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),document.addEventListener("click",(function(e){var t=e.target.closest("a[target=_modal]");t&&(e.ctrlKey||e.shiftKey||e.metaKey||e.defaultPrevented||(e.preventDefault(),openModal(t.href)))}))}();
